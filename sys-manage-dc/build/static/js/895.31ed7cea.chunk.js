"use strict";(self.webpackChunksys_manage_dc=self.webpackChunksys_manage_dc||[]).push([[895],{653:e=>{e.exports="data:image/png;base64,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"},6863:(e,t,s)=>{s.d(t,{db:()=>r,j:()=>o});var n=s(7064),a=s(7625),i=s(5472),c=s(5437);const l=(0,n.Wp)({apiKey:"AIzaSyBUJOR0UXP-MsHvzblD7mLsWQAOSjNyYFQ",authDomain:"sys-manage-dc-9c480.firebaseapp.com",databaseURL:"https://sys-manage-dc-9c480-default-rtdb.firebaseio.com",projectId:"sys-manage-dc-9c480",storageBucket:"sys-manage-dc-9c480.firebasestorage.app",messagingSenderId:"573023439455",appId:"1:573023439455:web:ee42e43973d02e2c79a9ea",measurementId:"G-DW576LW9W3"}),o=(0,a.xI)(l),r=(0,i.aU)(l);(0,c.P5)(l)},7885:(e,t,s)=>{s.d(t,{Lx:()=>a,iA:()=>i,sI:()=>n});const n=e=>({type:"SET_TAB",payload:e}),a=e=>({type:"SET_STATUS",payload:e}),i=e=>({type:"SET_USER_INFO",payload:e})},7895:(e,t,s)=>{s.d(t,{A:()=>ee});var n=s(5043),a=s(8964),i=s(7170),c=s(6569),l=s(5206),o=s(7419),r=s(1645),d=s(9126),h=s(8677),m=s(4768),g=s(1686),u=s(2294),A=s(9002),x=s(1919),p=s(7995),j=s(3727),y=s(3003),f=s(7885),b=s(8829),k=s(6863),C=s(5472),w=s(579);const B=()=>{const[e,t]=(0,n.useState)(!1),[s,a]=(0,n.useState)("");return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"feedback-title",style:{textDecoration:"none",cursor:"pointer"},onClick:()=>{t(!0)},children:(0,w.jsx)("p",{children:"Ph\u1ea3n h\u1ed3i"})}),(0,w.jsx)(b.A,{className:"feedback-content",closable:!1,title:(0,w.jsx)("h3",{children:"G\xf3p \xfd h\u1ec7 th\u1ed1ng qu\u1ea3n l\xfd th\xfa c\u01b0ng"}),open:e,onCancel:()=>{t(!1)},footer:(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{children:"\u0110\xe2y l\xe0 h\u1ec7 th\u1ed1ng ti\u1ebfp nh\u1eadn \xfd ki\u1ebfn cho n\u1ec1n t\u1ea3ng qu\u1ea3n l\xfd ch\xf3 m\xe8o \u1ee9ng d\u1ee5ng c\xf4ng ngh\u1ec7 IoT. B\u1ea1n c\xf3 th\u1ec3 g\u1eedi \u0111\u1ec1 xu\u1ea5t c\u1ea3i ti\u1ebfn, b\xe1o c\xe1o l\u1ed7i ho\u1eb7c g\xf3p \xfd li\xean quan \u0111\u1ebfn \u0111\u1ecbnh danh th\xfa c\u01b0ng, theo d\xf5i h\xe0nh vi vi ph\u1ea1m, x\u1eed ph\u1ea1t ho\u1eb7c th\xf4ng b\xe1o ti\xeam ph\xf2ng. Nh\u1eefng ph\u1ea3n h\u1ed3i c\xf3 gi\xe1 tr\u1ecb s\u1ebd \u0111\u01b0\u1ee3c \u0111\u1ed9i ng\u0169 k\u1ef9 thu\u1eadt ghi nh\u1eadn v\xe0 ph\u1ea3n h\u1ed3i trong th\u1eddi gian s\u1edbm nh\u1ea5t."}),(0,w.jsx)("textarea",{rows:8,cols:50,value:s,onChange:e=>a(e.target.value)}),(0,w.jsx)("br",{}),(0,w.jsx)(l.Ay,{onClick:async()=>{if(s.trim())try{const e=new Date,n=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}T${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`;await(0,C.gS)((0,C.rJ)(k.db,"feedbacks"),{content:s,createdAt:n}),c.Ay.success("Ph\u1ea3n h\u1ed3i c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi th\xe0nh c\xf4ng!"),a(""),t(!1)}catch(e){console.error("L\u1ed7i g\u1eedi ph\u1ea3n h\u1ed3i:",e),c.Ay.error("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi g\u1eedi ph\u1ea3n h\u1ed3i.")}else c.Ay.warning("Vui l\xf2ng nh\u1eadp n\u1ed9i dung ph\u1ea3n h\u1ed3i.")},children:"G\u1eedi"})]})})]})};var N=s(5055),v=s(5444),I=s(6603),S=s(487),D=s(446),Y=s.n(D),M=s(8502),T=s(4522),G=s(5520),H=s(7490);const P=e=>{let{onRowClick:t}=e;const[s,a]=(0,n.useState)([]),[i,c]=(0,n.useState)(!1),[o,r]=(0,n.useState)(!1),[d,h]=(0,n.useState)();(0,n.useEffect)((()=>{r(!0);try{const e=(0,C.P)((0,C.rJ)(k.db,"notifications"),(0,C._M)("message","==","Notification")),t=(0,C.aQ)(e,(e=>{const t=e.docs.map((e=>({id:e.id,petId:e.data().petId,time:e.data().time})));a(t),r(!1)}));h((()=>t))}catch(e){console.error("L\u1ed7i t\u1ea3i th\xf4ng b\xe1o:",e),r(!1)}return()=>null===d||void 0===d?void 0:d()}),[]);const m=()=>{r(!0);try{const e=(0,C.P)((0,C.rJ)(k.db,"notifications"),(0,C._M)("message","==","Notification")),t=(0,C.aQ)(e,(e=>{const t=e.docs.map((e=>({id:e.id,petId:e.data().petId,time:e.data().time})));a(t)}));h((()=>t))}catch(e){console.error("L\u1ed7i t\u1ea3i th\xf4ng b\xe1o:",e)}finally{r(!1)}};(0,n.useEffect)((()=>(i&&m(),()=>null===d||void 0===d?void 0:d())),[i]);const u=(0,w.jsxs)("div",{className:"custom-dropdown",children:[(0,w.jsxs)("div",{className:"notification-header",children:[(0,w.jsx)("span",{className:"notification-title",children:"Th\xf4ng b\xe1o"}),(0,w.jsx)(l.Ay,{icon:(0,w.jsx)(j.A,{}),type:"text",onClick:()=>c(!1)})]}),(0,w.jsx)(g.A,{spinning:o,children:(0,w.jsx)(T.A,{dataSource:s,renderItem:e=>(0,w.jsx)(T.A.Item,{className:"notification-item",onClick:()=>{c(!1),setTimeout((()=>{const s={id:e.petId,type:"\u0110\u1ecbnh danh ch\xf3(m\xe8o)",status:"\u0110\xe3 ho\xe0n th\xe0nh",requestCode:"",createdBy:"",createdAt:"",lastModifiedBy:"",lastUpdateTime:""};t(s,"notification")}),300)},children:(0,w.jsx)(T.A.Item.Meta,{title:(0,w.jsx)("strong",{children:`\u0110\u1ecbnh danh ch\xf3(m\xe8o) ${e.petId}`}),description:(0,w.jsx)("span",{className:"time-stamp",children:Y()(new Date(e.time)).format("DD/MM HH:mm")})})}),locale:{emptyText:"Kh\xf4ng c\xf3 th\xf4ng b\xe1o"}})})]});return(0,w.jsx)(G.A,{overlay:u,trigger:["click"],visible:i,onVisibleChange:e=>{c(e),e&&(i||m())},overlayClassName:"notification-dropdown",children:(0,w.jsx)(H.A,{count:s.length,overflowCount:99,children:(0,w.jsx)(l.Ay,{className:"btn-item",icon:(0,w.jsx)(M.A,{})})})})},{Header:R}=a.A,q=()=>(0,w.jsxs)("svg",{width:"180",height:"40",viewBox:"0 -10 180 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,w.jsx)("text",{x:"0",y:"28",fontFamily:"Segoe UI, sans-serif",fontSize:"26",fill:"white",fontWeight:"600",children:"PetGuardian"}),(0,w.jsx)("circle",{cx:"15",cy:"12",r:"3",fill:"white"}),(0,w.jsx)("circle",{cx:"22",cy:"10",r:"2",fill:"white"}),(0,w.jsx)("circle",{cx:"10",cy:"10",r:"2",fill:"white"}),(0,w.jsx)("circle",{cx:"18",cy:"6",r:"2",fill:"white"})]}),Q={setTab:f.sI,setStatus:f.Lx,setUserInfo:f.iA},O=(0,y.Ng)((e=>({tab:e.request.tab,status:e.request.status,userInfo:e.request.userInfo})),Q)((e=>{const{onRowClick:t}=e,a=localStorage.getItem("Id"),{userInfo:i,setUserInfo:y}=e,f=s(653),[D,M]=(0,n.useState)(!1),[T,G]=(0,n.useState)(!1),[H,Q]=(0,n.useState)(!1),[O]=N.A.useForm(),[E,J]=(0,n.useState)(null),[F,L]=(0,n.useState)(!1),[U,V]=(0,n.useState)([]),[X,z]=(0,n.useState)(!1),[W,Z]=(0,n.useState)(),[K,_]=(0,n.useState)(null),[$,ee]=(0,n.useState)([]),[te,se]=(0,n.useState)(!1),[ne,ae]=(0,n.useState)(),ie=(0,A.Zp)(),ce=()=>{G(!T),M(!1)},le=()=>{M(!1),G(!1)},oe=async()=>{z(!0);try{const e=["owners","managers"],t=[];for(const s of e){const e=(0,C.P)((0,C.rJ)(k.db,s),(0,C._M)("status","==","Processing")),n=(0,C.aQ)(e,(e=>{const t=[];e.forEach((e=>{t.push({id:e.id,collection:s,...e.data(),createdAt:e.data().createAt})})),V((e=>[...e.filter((e=>e.collection!==s)),...t]))}));t.push(n)}Z((()=>()=>{t.forEach((e=>e()))}))}catch(e){c.Ay.error("L\u1ed7i khi t\u1ea3i danh s\xe1ch t\xe0i kho\u1ea3n")}finally{z(!1)}};(0,n.useEffect)((()=>(te&&(async()=>{try{const e=(0,C.P)((0,C.rJ)(k.db,"notifications"),(0,C._M)("message","==","Notification")),t=(0,C.aQ)(e,(e=>{const t=[];e.forEach((e=>{t.push({id:e.id,...e.data(),createdAt:e.data().createdAt})})),ee(t)}));ae((()=>t))}catch(e){c.Ay.error("L\u1ed7i khi t\u1ea3i th\xf4ng b\xe1o")}})(),()=>{ne&&ne()})),[te]),(0,n.useEffect)((()=>{const e=localStorage.getItem("role");_(e)}),[]),(0,n.useEffect)((()=>()=>{W&&W()}),[W]);(0,n.useEffect)((()=>{a&&(async()=>{try{const e=localStorage.getItem("email");if(!e)return;const t=["owners","managers","admins"];for(const s of t){const t=(0,C.P)((0,C.rJ)(k.db,s),(0,C._M)("email","==",e),(0,C.AB)(1)),n=await(0,C.GG)(t);if(!n.empty){const e=n.docs[0],t=e.data();y({FullName:t.fullName,Email:t.email,AvatarPath:t.avatarPath||"",sex:t.sex||!0,birthday:t.birthday?Y()(t.birthday):void 0,phone:t.phone||"",address:t.address||"",cccd:t.cccd||"",lastModifiedBy:t.lastModifiedBy||""}),J((0,C.H9)(k.db,s,e.id));break}}}catch(e){console.error("L\u1ed7i khi l\u1ea5y th\xf4ng tin ng\u01b0\u1eddi d\xf9ng:",e)}})()}),[a,y]);const re=[{title:"Lo\u1ea1i t\xe0i kho\u1ea3n",dataIndex:"collection",key:"type",render:e=>"owners"===e?"Ng\u01b0\u1eddi d\xf9ng":"C\u01a1 quan qu\u1ea3n l\xfd",responsive:["md"],width:100},{title:"Email",dataIndex:"email",key:"email",ellipsis:!0,width:150},{title:"T\xean \u0111\u1ea7y \u0111\u1ee7",dataIndex:"fullName",key:"fullName",ellipsis:!0,width:120},{title:"Ng\xe0y t\u1ea1o",dataIndex:"createdAt",key:"createdAt",render:e=>Y()(e).format("DD/MM/YYYY"),width:100,responsive:["md"]},{title:"H\xe0nh \u0111\u1ed9ng",key:"action",render:(e,t)=>(0,w.jsx)(l.Ay,{type:"primary",onClick:()=>(async e=>{try{const t=(0,C.H9)(k.db,e.collection,e.id);await(0,C.mZ)(t,{status:"Active",approvedBy:i.Email,approvedAt:Y()().format("YYYY-MM-DD HH:mm:ss")}),c.Ay.success("Duy\u1ec7t t\xe0i kho\u1ea3n th\xe0nh c\xf4ng"),oe()}catch(t){c.Ay.error("Duy\u1ec7t t\xe0i kho\u1ea3n th\u1ea5t b\u1ea1i")}})(t),style:{padding:window.innerWidth<768?"2px 6px":"4px 8px",fontSize:window.innerWidth<768?"12px":"14px"},children:"Duy\u1ec7t"}),width:80}];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(R,{className:"mcs-header",children:(0,w.jsxs)(o.A,{className:"row-header",gutter:[24,24],children:[(0,w.jsxs)(r.A,{xs:22,sm:20,md:16,lg:16,xl:16,xxl:16,className:"col-logo",children:[(0,w.jsx)("div",{className:"col-logo-menu",children:(0,w.jsx)(l.Ay,{className:"btn-menu",children:(0,w.jsx)(x.A,{})})}),(0,w.jsx)("div",{onClick:()=>{window.location.reload()},className:"col-logo-img",children:(0,w.jsx)(A.k2,{to:"/",children:(0,w.jsx)(q,{})})}),(0,w.jsx)("div",{className:"col-logo-label",children:(0,w.jsx)("p",{children:"PetHub"})})]}),(0,w.jsxs)(r.A,{xs:2,sm:4,md:8,lg:8,xl:8,xxl:8,className:"col-function",children:[(0,w.jsxs)(d.A,{className:"group-btn",mode:"horizontal",triggerSubMenuAction:"click",overflowedIndicatorPopupClassName:"popup-menu",children:[(0,w.jsx)(d.A.Item,{className:"function-menu-item",children:(0,w.jsx)(l.Ay,{className:"btn-item",onClick:()=>{M(!D),G(!1)},children:(0,w.jsx)(p.A,{})})}),(0,w.jsx)(d.A.Item,{className:"function-menu-item",children:(0,w.jsx)(P,{onRowClick:t||(()=>{})})}),(0,w.jsxs)(h.A,{className:"dropdown-notifications",placement:"right",open:te,onClose:()=>se(!1),mask:!1,closable:!1,children:[(0,w.jsxs)("div",{className:"title-dropdown",children:[(0,w.jsx)("span",{children:"Th\xf4ng b\xe1o"}),(0,w.jsx)(l.Ay,{className:"header-btn-close",onClick:()=>se(!1),children:(0,w.jsx)(j.A,{})})]}),(0,w.jsxs)("div",{className:"content-dropdown",children:[$.map((e=>(0,w.jsxs)("div",{className:"notification-item",style:{padding:"8px",borderBottom:"1px solid #f0f0f0",marginBottom:"4px"},children:[(0,w.jsx)("p",{style:{margin:0},children:e.content}),(0,w.jsx)("small",{style:{color:"#666"},children:Y()(e.createdAt).format("DD/MM/YYYY HH:mm")})]},e.id))),0===$.length&&(0,w.jsx)("p",{style:{textAlign:"center",color:"#666"},children:"Kh\xf4ng c\xf3 th\xf4ng b\xe1o m\u1edbi"})]})]}),(0,w.jsx)(d.A.Item,{className:"function-menu-item",children:(0,w.jsx)(l.Ay,{onClick:ce,className:"btn-item",children:i.AvatarPath?(0,w.jsx)(m.A,{shape:"circle",size:32,src:`http://localhost:63642/${i.AvatarPath}`,alt:"avatar"}):(0,w.jsx)(m.A,{shape:"circle",size:32,src:String(f),alt:"avatar"})})})]}),(0,w.jsxs)(h.A,{className:"dropdown-help",placement:"right",rootClassName:"root-dropdown-help",open:D,mask:!1,closable:!1,children:[(0,w.jsxs)("div",{className:"title-dropdown",children:[(0,w.jsx)("span",{children:"Tr\u1ee3 gi\xfap"}),(0,w.jsx)(l.Ay,{className:"header-btn-close",onClick:le,children:(0,w.jsx)(j.A,{})})]}),(0,w.jsxs)("div",{className:"content-dropdown",children:[(0,w.jsx)("h4",{style:{fontSize:"18px",fontFamily:"Segoe UI",marginLeft:"10px"},children:"H\u1ed7 tr\u1ee3 PetGuardian"}),(0,w.jsx)(A.k2,{to:"/",style:{textDecoration:"none"},children:(0,w.jsx)("p",{children:"Gi\u1edbi thi\u1ec7u"})}),(0,w.jsx)(B,{})]})]}),(0,w.jsxs)(h.A,{className:"dropdown-help",placement:"right",onClose:le,open:T,mask:!1,closable:!1,children:[(0,w.jsxs)("div",{className:"title-dropdown",children:[(0,w.jsx)("span",{children:"T\xe0i kho\u1ea3n c\u1ee7a t\xf4i"}),(0,w.jsx)(l.Ay,{className:"header-btn-close",onClick:ce,children:(0,w.jsx)(j.A,{})})]}),(0,w.jsxs)("div",{className:"content-dropdown",children:[(0,w.jsxs)("div",{className:"account-info",children:[i.AvatarPath?(0,w.jsx)("img",{src:`http://localhost:63642/${i.AvatarPath}`,alt:"avatar"}):(0,w.jsx)("img",{src:String(f),alt:"avatar"}),(0,w.jsx)("span",{className:"info-name",children:i.FullName}),(0,w.jsx)("br",{}),(0,w.jsx)("span",{className:"info-email",children:i.Email})]}),(0,w.jsxs)("div",{className:"content-info",children:[(0,w.jsx)("div",{className:"my-profile",style:{textDecoration:"none"},onClick:()=>{G(!1),Q(!0)},children:(0,w.jsx)("p",{children:"Ch\u1ec9nh s\u1eeda h\u1ed3 s\u01a1"})}),"admins"===K&&(0,w.jsx)("div",{className:"my-profile",style:{textDecoration:"none"},onClick:async()=>{G(!1),L(!0),await oe()},children:(0,w.jsx)("p",{children:"Duy\u1ec7t t\xe0i kho\u1ea3n"})}),(0,w.jsx)(b.A,{title:"Qu\u1ea3n l\xfd t\xe0i kho\u1ea3n ch\u1edd duy\u1ec7t",open:F,onCancel:()=>{L(!1),W&&W()},footer:null,width:window.innerWidth<768?"90%":800,style:{top:30,maxWidth:"100vw"},styles:{body:{maxHeight:"70vh",overflowY:"auto",padding:"12px 16px"}},children:(0,w.jsx)(g.A,{spinning:X,children:(0,w.jsx)(u.A,{columns:re,dataSource:U,rowKey:"id",pagination:{pageSize:5},scroll:{x:500},size:window.innerWidth<768?"small":"middle",style:{fontSize:window.innerWidth<768?"12px":"14px"}})})}),(0,w.jsx)(A.k2,{to:"#",onClick:e=>{e.preventDefault(),localStorage.clear(),c.Ay.success("\u0110\u0103ng xu\u1ea5t th\xe0nh c\xf4ng!"),ie("/login",{replace:!0})},style:{textDecoration:"none"},children:(0,w.jsx)("p",{children:"\u0110\u0103ng xu\u1ea5t"})})]})]})]})]})]})}),(0,w.jsx)(b.A,{title:"Ch\u1ec9nh s\u1eeda th\xf4ng tin t\xe0i kho\u1ea3n",open:H,onCancel:()=>Q(!1),onOk:()=>{O.validateFields().then((async e=>{try{await(async e=>{try{if(!E)throw new Error("User document reference not available");const t=e.birthday?e.birthday.format("YYYY-MM-DDTHH:mm:ss"):null,s=Y()().format("YYYY-MM-DDTHH:mm:ss"),n={...e,birthday:t,lastModifiedBy:i.lastModifiedBy||"unknown",updateAt:s};await(0,C.mZ)(E,n),c.Ay.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!")}catch(t){console.error("L\u1ed7i khi c\u1eadp nh\u1eadt Firestore:",t),c.Ay.error("C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i!")}})(e),y({...i,FullName:e.fullName,Email:e.email,sex:e.sex,birthday:e.birthday,phone:e.phone,address:e.address,cccd:e.cccd}),Q(!1)}catch(t){c.Ay.error("C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i!")}}))},okText:"L\u01b0u",cancelText:"H\u1ee7y",centered:!0,width:window.innerWidth<768?"90%":500,style:{maxHeight:"80vh",overflow:"hidden"},styles:{body:{maxHeight:"60vh",overflowY:"auto",padding:"16px"}},children:(0,w.jsxs)(N.A,{layout:"vertical",form:O,initialValues:{email:i.Email,fullName:i.FullName,sex:i.sex||!0,birthday:i.birthday,phone:i.phone,address:i.address,cccd:i.cccd},children:[(0,w.jsx)(N.A.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"Email kh\xf4ng h\u1ee3p l\u1ec7!"},{required:!0,message:"Vui l\xf2ng nh\u1eadp email!"}],children:(0,w.jsx)(v.A,{placeholder:"Nh\u1eadp email c\u1ee7a b\u1ea1n",disabled:!0})}),(0,w.jsx)(N.A.Item,{label:"H\u1ecd v\xe0 t\xean",name:"fullName",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 h\u1ecd t\xean c\u1ee7a b\u1ea1n!"}],children:(0,w.jsx)(v.A,{placeholder:"Nh\u1eadp h\u1ecd v\xe0 t\xean c\u1ee7a b\u1ea1n"})}),(0,w.jsx)(N.A.Item,{label:"Gi\u1edbi t\xednh",name:"sex",rules:[{required:!0,message:"Ch\u1ecdn gi\u1edbi t\xednh"}],style:{textAlign:"center"},children:(0,w.jsxs)(I.Ay.Group,{children:[(0,w.jsx)(I.Ay,{value:!0,children:"Nam"}),(0,w.jsx)(I.Ay,{value:!1,children:"N\u1eef"})]})}),(0,w.jsx)(N.A.Item,{name:"birthday",label:"Ng\xe0y sinh",rules:[{required:!0,message:"Vui l\xf2ng ch\u1ecdn ng\xe0y sinh!"}],style:{textAlign:"center"},children:(0,w.jsx)(S.A,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",placeholder:"Ch\u1ecdn ng\xe0y sinh"})}),(0,w.jsx)(N.A.Item,{name:"phone",label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!"},{pattern:/^[0-9]{10}$/,message:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i c\xf3 10 ch\u1eef s\u1ed1!"}],children:(0,w.jsx)(v.A,{placeholder:"Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i c\u1ee7a b\u1ea1n"})}),(0,w.jsx)(N.A.Item,{name:"address",label:"\u0110\u1ecba ch\u1ec9",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp \u0111\u1ecba ch\u1ec9!"}],children:(0,w.jsx)(v.A,{placeholder:"Nh\u1eadp \u0111\u1ecba ch\u1ec9 c\u1ee7a b\u1ea1n"})}),(0,w.jsx)(N.A.Item,{name:"cccd",label:"S\u1ed1 CCCD",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp s\u1ed1 CCCD!"},{pattern:/^[0-9]{12}$/,message:"S\u1ed1 CCCD ph\u1ea3i c\xf3 12 ch\u1eef s\u1ed1!"}],children:(0,w.jsx)(v.A,{placeholder:"Nh\u1eadp s\u1ed1 c\u0103n c\u01b0\u1edbc c\xf4ng d\xe2n",disabled:!0})})]})})]})}));var E=s(6989),J=s(1199),F=s(6091),L=s(4524);const{Sider:U}=a.A;function V(e,t,s,n,a){return{key:t,icon:s,children:n,label:e,type:a}}const X={setTab:f.sI,setStatus:f.Lx},z=(0,y.Ng)((e=>({tab:e.request.tab,status:e.request.status})),X)((e=>{const t=(0,A.Zp)(),s=localStorage.getItem("role"),{tab:a,setTab:c,setStatus:l}=e,o=[V("Y\xeau c\u1ea7u","requests",(0,w.jsx)(E.A,{}),[V("T\u1ea5t c\u1ea3 y\xeau c\u1ea7u","get-all"),V("Th\xf4ng tin thi\u1ebft b\u1ecb","get-devices"),V("\u0110\u1ecbnh danh ch\xf3(m\xe8o)","get-pets"),V("Th\xf4ng tin vi ph\u1ea1m","get-violations"),V("Th\xf4ng tin ti\xeam ph\xf2ng","get-vaccines")]),V("Tr\u1ea1ng th\xe1i","status",(0,w.jsx)(J.A,{}),[V("\u0110ang ghi th\u1ebb","Writing"),V("\u0110ang x\u1eed l\xfd","Processing"),V("\u0110\xe3 ho\xe0n th\xe0nh","Active"),V("Ch\u01b0a gi\u1ea3i quy\u1ebft","Pending")]),..."admins"===s?[V("Reports","reports",(0,w.jsx)(F.A,{}))]:[]],r=[V("C\xe0i \u0111\u1eb7t","setting",(0,w.jsx)(L.A,{}))],[h,m]=(0,n.useState)("requests"),[g,u]=(0,n.useState)(!1),{token:{colorBgContainer:x}}=i.A.useToken();return(0,w.jsx)("div",{className:"sider-layout",children:(0,w.jsx)(U,{collapsible:!0,collapsed:g,onCollapse:e=>u(e),style:{background:x},width:230,breakpoint:"md",children:(0,w.jsx)("div",{children:(0,w.jsx)(d.A,{mode:"inline",defaultSelectedKeys:[a],defaultOpenKeys:["requests"],openKeys:[h],style:{height:"100%"},items:e.profile?r:o,onClick:s=>{"status"===s.keyPath[1]?(e.setStatus(s.key),e.setTab("")):(s.keyPath[1],e.setTab(s.key),e.setStatus("")),"setting"===s.keyPath[0]&&t("/setting"),"reports"===s.key&&t("/reports")},onOpenChange:e=>{m(e[1])}})})})})}));const W=s.p+"static/media/united_states.4c70daf4f0a00276899f9ea7d7e995e7.svg";const Z=s.p+"static/media/vietnam.26a55d36ef6e091f6c33ee0f529b7f04.svg",{Footer:K}=a.A,_=()=>{const[e,t]=(0,n.useState)("vn"),[s,a]=(0,n.useState)("vn"),i=(0,w.jsxs)(d.A,{onClick:e=>{t(e.key),a(e.key)},children:[(0,w.jsxs)(d.A.Item,{className:"en"===s?"selected":"",children:[(0,w.jsx)("img",{src:W,alt:"img-en-flat",width:20}),(0,w.jsx)("span",{children:" EN"})]},"en"),(0,w.jsxs)(d.A.Item,{className:"vn"===s?"selected":"",children:[(0,w.jsx)("img",{src:Z,alt:"img-vn-flat",width:20}),(0,w.jsx)("span",{children:" VN"})]},"vn")]});return(0,w.jsx)(K,{className:"mcs-footer",children:(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:"footer-left",children:(0,w.jsx)("span",{children:(0,w.jsxs)("b",{children:["\xa9 ",(new Date).getFullYear()," PetGuardian IoT"]})})}),(0,w.jsxs)("div",{className:"footer-right",children:[(0,w.jsx)(G.A,{overlay:i,trigger:["click"],className:"dropdown-language",children:(0,w.jsxs)("span",{children:[(0,w.jsx)("img",{src:"en"===e?W:Z,alt:"img-flat",width:20}),(0,w.jsx)("span",{children:e.toUpperCase()})]})}),(0,w.jsx)("span",{children:"Theo d\xf5i"}),(0,w.jsx)("span",{children:"B\u1ea3o v\u1ec7"}),(0,w.jsx)("span",{children:"K\u1ebft n\u1ed1i"})]})]})})},{Content:$}=a.A,ee=e=>{let{profile:t,children:s,onRowClick:n}=e;const{token:{colorBgContainer:c}}=i.A.useToken();return(0,w.jsxs)("div",{className:"manage-request",children:[(0,w.jsx)(O,{onRowClick:n}),(0,w.jsx)($,{children:(0,w.jsxs)(a.A,{style:{backgroundColor:c},children:[(0,w.jsx)(z,{profile:t}),(0,w.jsx)(a.A,{style:{backgroundColor:c},children:(0,w.jsx)($,{style:{minHeight:280},children:s()})})]})}),(0,w.jsx)(_,{})]})}}}]);
//# sourceMappingURL=895.31ed7cea.chunk.js.map